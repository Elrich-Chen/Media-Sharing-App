{"ast":null,"code":"import axios from 'axios';\nconst API_URL = 'http://localhost:8000';\n\n// Create axios instance\nexport const api = axios.create({\n  baseURL: API_URL\n});\n\n// Add token to requests if it exists\napi.interceptors.request.use(config => {\n  const token = localStorage.getItem('token');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n});\n\n/**\n * Encode text for ImageKit overlay - base64 then URL encode\n * Python: base64.b64encode(text.encode('utf-8')).decode('utf-8') -> urllib.parse.quote\n */\nexport const encodeTextForOverlay = text => {\n  if (!text) return \"\";\n  // JS btoa handles Latin1, so we need to escape for UTF-8 support\n  const base64Text = btoa(unescape(encodeURIComponent(text)));\n  return encodeURIComponent(base64Text);\n};\n\n/**\n * Create transformed URL for ImageKit\n */\nexport const createTransformedUrl = (originalUrl, transformationParams, caption = null) => {\n  let params = transformationParams;\n  if (caption) {\n    const encodedCaption = encodeTextForOverlay(caption);\n    // Add text overlay at bottom with semi-transparent background\n    const textOverlay = `l-text,ie-${encodedCaption},ly-N20,lx-20,fs-100,co-white,bg-000000A0,l-end`;\n    params = textOverlay;\n  }\n  if (!params) return originalUrl;\n  const parts = originalUrl.split(\"/\");\n  // Assuming structure: https://ik.imagekit.io/id/path...\n  // parts: [https:, \"\", domain, id, ...path]\n\n  const baseUrl = parts.slice(0, 4).join(\"/\");\n  const filePath = parts.slice(4).join(\"/\");\n  return `${baseUrl}/tr:${params}/${filePath}`;\n};","map":{"version":3,"names":["axios","API_URL","api","create","baseURL","interceptors","request","use","config","token","localStorage","getItem","headers","Authorization","encodeTextForOverlay","text","base64Text","btoa","unescape","encodeURIComponent","createTransformedUrl","originalUrl","transformationParams","caption","params","encodedCaption","textOverlay","parts","split","baseUrl","slice","join","filePath"],"sources":["/Users/elrichchen/Backend_Roadmap/FAST_API/Tech_W_Tim/frontend-react/src/utils/api.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_URL = 'http://localhost:8000';\n\n// Create axios instance\nexport const api = axios.create({\n  baseURL: API_URL,\n});\n\n// Add token to requests if it exists\napi.interceptors.request.use((config) => {\n  const token = localStorage.getItem('token');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n});\n\n/**\n * Encode text for ImageKit overlay - base64 then URL encode\n * Python: base64.b64encode(text.encode('utf-8')).decode('utf-8') -> urllib.parse.quote\n */\nexport const encodeTextForOverlay = (text) => {\n  if (!text) return \"\";\n  // JS btoa handles Latin1, so we need to escape for UTF-8 support\n  const base64Text = btoa(unescape(encodeURIComponent(text)));\n  return encodeURIComponent(base64Text);\n};\n\n/**\n * Create transformed URL for ImageKit\n */\nexport const createTransformedUrl = (originalUrl, transformationParams, caption = null) => {\n  let params = transformationParams;\n\n  if (caption) {\n    const encodedCaption = encodeTextForOverlay(caption);\n    // Add text overlay at bottom with semi-transparent background\n    const textOverlay = `l-text,ie-${encodedCaption},ly-N20,lx-20,fs-100,co-white,bg-000000A0,l-end`;\n    params = textOverlay;\n  }\n\n  if (!params) return originalUrl;\n\n  const parts = originalUrl.split(\"/\");\n  // Assuming structure: https://ik.imagekit.io/id/path...\n  // parts: [https:, \"\", domain, id, ...path]\n  \n  const baseUrl = parts.slice(0, 4).join(\"/\");\n  const filePath = parts.slice(4).join(\"/\");\n  \n  return `${baseUrl}/tr:${params}/${filePath}`;\n};"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,OAAO,GAAG,uBAAuB;;AAEvC;AACA,OAAO,MAAMC,GAAG,GAAGF,KAAK,CAACG,MAAM,CAAC;EAC9BC,OAAO,EAAEH;AACX,CAAC,CAAC;;AAEF;AACAC,GAAG,CAACG,YAAY,CAACC,OAAO,CAACC,GAAG,CAAEC,MAAM,IAAK;EACvC,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAC3C,IAAIF,KAAK,EAAE;IACTD,MAAM,CAACI,OAAO,CAACC,aAAa,GAAG,UAAUJ,KAAK,EAAE;EAClD;EACA,OAAOD,MAAM;AACf,CAAC,CAAC;;AAEF;AACA;AACA;AACA;AACA,OAAO,MAAMM,oBAAoB,GAAIC,IAAI,IAAK;EAC5C,IAAI,CAACA,IAAI,EAAE,OAAO,EAAE;EACpB;EACA,MAAMC,UAAU,GAAGC,IAAI,CAACC,QAAQ,CAACC,kBAAkB,CAACJ,IAAI,CAAC,CAAC,CAAC;EAC3D,OAAOI,kBAAkB,CAACH,UAAU,CAAC;AACvC,CAAC;;AAED;AACA;AACA;AACA,OAAO,MAAMI,oBAAoB,GAAGA,CAACC,WAAW,EAAEC,oBAAoB,EAAEC,OAAO,GAAG,IAAI,KAAK;EACzF,IAAIC,MAAM,GAAGF,oBAAoB;EAEjC,IAAIC,OAAO,EAAE;IACX,MAAME,cAAc,GAAGX,oBAAoB,CAACS,OAAO,CAAC;IACpD;IACA,MAAMG,WAAW,GAAG,aAAaD,cAAc,iDAAiD;IAChGD,MAAM,GAAGE,WAAW;EACtB;EAEA,IAAI,CAACF,MAAM,EAAE,OAAOH,WAAW;EAE/B,MAAMM,KAAK,GAAGN,WAAW,CAACO,KAAK,CAAC,GAAG,CAAC;EACpC;EACA;;EAEA,MAAMC,OAAO,GAAGF,KAAK,CAACG,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAACC,IAAI,CAAC,GAAG,CAAC;EAC3C,MAAMC,QAAQ,GAAGL,KAAK,CAACG,KAAK,CAAC,CAAC,CAAC,CAACC,IAAI,CAAC,GAAG,CAAC;EAEzC,OAAO,GAAGF,OAAO,OAAOL,MAAM,IAAIQ,QAAQ,EAAE;AAC9C,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}