{"ast":null,"code":"var _jsxFileName = \"/Users/elrichchen/Backend_Roadmap/FAST_API/Tech_W_Tim/frontend-react/src/components/Feed.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Trash2 } from 'lucide-react';\nimport { api, createTransformedUrl } from '../utils/api';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Feed = ({\n  user\n}) => {\n  _s();\n  const [posts, setPosts] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const fetchFeed = async () => {\n    try {\n      const res = await api.get('/feed');\n      setPosts(res.data.posts);\n    } catch (err) {\n      console.error(\"Failed to load feed\", err);\n    } finally {\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    fetchFeed();\n  }, []);\n  const handleDelete = async postId => {\n    if (!window.confirm(\"Delete this post?\")) return;\n    try {\n      await api.delete(`/posts/${postId}`);\n      setPosts(posts.filter(p => p.id !== postId));\n    } catch (err) {\n      alert(\"Failed to delete post\");\n    }\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      textAlign: 'center'\n    },\n    children: \"Loading feed...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 34,\n    columnNumber: 23\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      style: {\n        marginBottom: '30px'\n      },\n      children: \"\\uD83C\\uDFE0 Feed\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 7\n    }, this), posts.length === 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"No posts yet! Be the first to share something.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 30\n    }, this), posts.map(post => {\n      const isVideo = post.file_type !== 'image';\n      // Logic from frontend.py: if image, use caption overlay. If video, use specific resize + caption.\n      const mediaUrl = isVideo ? createTransformedUrl(post.url, \"w-400,h-200,cm-pad_resize,bg-blurred\") : createTransformedUrl(post.url, \"\", post.caption);\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"post-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"post-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"post-user\",\n              children: post.email\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 52,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"post-date\",\n              children: [\"\\u2022 \", post.created_at.slice(0, 10)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 53,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 51,\n            columnNumber: 15\n          }, this), post.is_owner && /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"delete-btn\",\n            onClick: () => handleDelete(post.id),\n            children: /*#__PURE__*/_jsxDEV(Trash2, {\n              size: 18\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 57,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 13\n        }, this), isVideo ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"video\", {\n            src: mediaUrl,\n            controls: true,\n            className: \"post-media\",\n            style: {\n              maxHeight: '400px'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 17\n          }, this), post.caption && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"post-caption\",\n            children: post.caption\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 34\n          }, this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(\"img\", {\n          src: mediaUrl,\n          alt: \"Post\",\n          className: \"post-media\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 15\n        }, this)]\n      }, post.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 11\n      }, this);\n    })]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 37,\n    columnNumber: 5\n  }, this);\n};\n_s(Feed, \"RbKeE0iIFzYv1PT2nn3dHnXn06o=\");\n_c = Feed;\nexport default Feed;\nvar _c;\n$RefreshReg$(_c, \"Feed\");","map":{"version":3,"names":["React","useState","useEffect","Trash2","api","createTransformedUrl","jsxDEV","_jsxDEV","Fragment","_Fragment","Feed","user","_s","posts","setPosts","loading","setLoading","fetchFeed","res","get","data","err","console","error","handleDelete","postId","window","confirm","delete","filter","p","id","alert","style","textAlign","children","fileName","_jsxFileName","lineNumber","columnNumber","marginBottom","length","map","post","isVideo","file_type","mediaUrl","url","caption","className","email","created_at","slice","is_owner","onClick","size","src","controls","maxHeight","alt","_c","$RefreshReg$"],"sources":["/Users/elrichchen/Backend_Roadmap/FAST_API/Tech_W_Tim/frontend-react/src/components/Feed.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Trash2 } from 'lucide-react';\nimport { api, createTransformedUrl } from '../utils/api';\n\nconst Feed = ({ user }) => {\n  const [posts, setPosts] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  const fetchFeed = async () => {\n    try {\n      const res = await api.get('/feed');\n      setPosts(res.data.posts);\n    } catch (err) {\n      console.error(\"Failed to load feed\", err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchFeed();\n  }, []);\n\n  const handleDelete = async (postId) => {\n    if (!window.confirm(\"Delete this post?\")) return;\n    try {\n      await api.delete(`/posts/${postId}`);\n      setPosts(posts.filter(p => p.id !== postId));\n    } catch (err) {\n      alert(\"Failed to delete post\");\n    }\n  };\n\n  if (loading) return <div style={{ textAlign: 'center' }}>Loading feed...</div>;\n\n  return (\n    <div>\n      <h1 style={{ marginBottom: '30px' }}>üè† Feed</h1>\n      {posts.length === 0 && <p>No posts yet! Be the first to share something.</p>}\n      \n      {posts.map(post => {\n        const isVideo = post.file_type !== 'image';\n        // Logic from frontend.py: if image, use caption overlay. If video, use specific resize + caption.\n        const mediaUrl = isVideo \n          ? createTransformedUrl(post.url, \"w-400,h-200,cm-pad_resize,bg-blurred\")\n          : createTransformedUrl(post.url, \"\", post.caption);\n\n        return (\n          <div key={post.id} className=\"post-card\">\n            <div className=\"post-header\">\n              <div>\n                <span className=\"post-user\">{post.email}</span>\n                <span className=\"post-date\">‚Ä¢ {post.created_at.slice(0, 10)}</span>\n              </div>\n              {post.is_owner && (\n                <button className=\"delete-btn\" onClick={() => handleDelete(post.id)}>\n                  <Trash2 size={18} />\n                </button>\n              )}\n            </div>\n            \n            {isVideo ? (\n              <>\n                <video src={mediaUrl} controls className=\"post-media\" style={{ maxHeight: '400px' }} />\n                {post.caption && <div className=\"post-caption\">{post.caption}</div>}\n              </>\n            ) : (\n              <img src={mediaUrl} alt=\"Post\" className=\"post-media\" />\n            )}\n          </div>\n        );\n      })}\n    </div>\n  );\n};\n\nexport default Feed;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}